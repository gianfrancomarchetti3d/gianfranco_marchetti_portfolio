<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gianfranco Marchetti — Portfolio</title>
  <link rel="stylesheet" href="styles.css">

  <style>
    /* Assicura che il canvas si estenda correttamente */
    #canvas-wrap {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0; /* dietro il testo */
    }

    .hero-text {
      position: relative;
      z-index: 1; /* sopra il canvas */
      color: #ffffff; /* testo bianco leggibile sul nero */
    }

    .hero {
      position: relative;
      width: 100%;
      height: 80vh;
      overflow: hidden;
      background: #000000;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: #000; /* sfondo nero generale */
      color: #ffffff;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="nav">
      <a class="logo" href="index.html">Gianfranco Marchetti</a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="portfolio.html">Portfolio</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
    <div class="hero">
      <div class="hero-text">
        <h1>Gianfranco Marchetti</h1>
        <p class="subtitle">Grafico 3D • Animazione • VFX — 15+ anni</p>
        <p class="lead">Creo esperienze visive e prototipi 3D per clienti internazionali. Scorri per vedere il mio lavoro.</p>
        <a class="cta" href="portfolio.html" role="button">Vedi il portfolio</a>
      </div>
      <div id="canvas-wrap" class="hero-canvas" aria-hidden="true"></div>
    </div>
  </header>

  <main class="container">
    <section class="intro">
      <h2>Chi sono</h2>
      <p>
        Grafico 3D con oltre 15 anni di esperienza, specializzato in innovazione digitale,
        Virtual Tour a 360°, animazione e modellazione. Ho guidato progetti complessi e lavori
        internazionali, con un approccio pratico e orientato al risultato.
      </p>
    </section>

    <section class="highlights">
      <article>
        <h3>Virtual Tour & Mapping</h3>
        <p>Ho sviluppato il primo Virtual Tour a 360° per mappare interi territori e collaborato su implementazioni Street View ad alta scala.</p>
      </article>
      <article>
        <h3>3D & VFX</h3>
        <p>Modellazione, animazioni e VFX per pubblicità e progetti interattivi. Strumenti principali: Blender, Cinema 4D.</p>
      </article>
      <article>
        <h3>AI & Scripting</h3>
        <p>Competenze in Python e integrazione di tool automatizzati per workflow 3D e gestione asset.</p>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div>© <span id="year"></span> Gianfranco Marchetti — <a href="portfolio.html">Portfolio</a></div>
    <div class="socials">
      <a href="https://www.artstation.com/gianfrancomarchetti1" target="_blank" rel="noopener">ArtStation</a> ·
      <a href="https://www.linkedin.com/in/gianfranco-marchetti-b79154263/" target="_blank" rel="noopener">LinkedIn</a> ·
      <a href="mailto:gianfranco.marchetti@blu.it">Email</a>
    </div>
  </footer>

  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js';

    const wrap = document.getElementById('canvas-wrap');
    const width = wrap.clientWidth;
    const height = wrap.clientHeight;

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000); // sfondo nero

    const camera = new THREE.PerspectiveCamera(40, width / height, 0.1, 100);
    camera.position.set(6, 5, 8);

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(width, height);
    renderer.setPixelRatio(window.devicePixelRatio || 1);
    wrap.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.enablePan = false;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 0.6;

    // Luci
    const d1 = new THREE.DirectionalLight(0xffffff, 0.9);
    d1.position.set(5, 10, 7);
    scene.add(d1);
    scene.add(new THREE.AmbientLight(0x7a7a7a, 0.8));

    // Pavimento leggermente visibile
    const floor = new THREE.Mesh(
      new THREE.PlaneGeometry(30, 30),
      new THREE.MeshStandardMaterial({ color: 0x111111 })
    );
    floor.rotation.x = -Math.PI / 2;
    floor.position.y = -0.01;
    scene.add(floor);

    // Funzione per creare ingranaggi
    function createGear(radius, teeth, thickness, color) {
      const group = new THREE.Group();
      const base = new THREE.CylinderGeometry(radius * 0.86, radius * 0.86, thickness, 64);
      const mat = new THREE.MeshStandardMaterial({ metalness: 0.7, roughness: 0.35, color: color });
      const baseMesh = new THREE.Mesh(base, mat);
      baseMesh.rotation.x = Math.PI / 2;
      group.add(baseMesh);

      const toothGeom = new THREE.BoxGeometry(radius * 0.15, thickness * 1.05, radius * 0.05);
      for (let i = 0; i < teeth; i++) {
        const t = new THREE.Mesh(toothGeom, mat);
        const angle = (i / teeth) * Math.PI * 2;
        const r = radius * 0.95;
        t.position.set(Math.cos(angle) * r, 0, Math.sin(angle) * r);
        t.rotation.y = -angle;
        group.add(t);
      }
      return group;
    }

    const gear1 = createGear(1.5, 28, 0.4, 0x4b5563);
    const gear2 = createGear(1.0, 20, 0.4, 0x1f2937);
    const gear3 = createGear(0.6, 14, 0.4, 0x374151);

    gear1.position.set(-1.0, 0.28, 0);
    gear2.position.set(0.8, 0.28, 0);
    gear3.position.set(2.0, 0.28, 0);

    scene.add(gear1, gear2, gear3);

    // Particelle sullo sfondo
    const particleCount = 200;
    const particlesGeometry = new THREE.BufferGeometry();
    const positions = [];
    for (let i = 0; i < particleCount; i++) {
      positions.push((Math.random() - 0.5) * 20, (Math.random() - 0.5) * 10, (Math.random() - 0.5) * 20);
    }
    particlesGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
    const particlesMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.08, transparent: true, opacity: 0.7 });
    const particles = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particles);

    const clock = new THREE.Clock();

    function animate() {
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();
      gear1.rotation.z = t * 0.6;
      gear2.rotation.z = -t * 0.9;
      gear3.rotation.z = t * 1.2;
      particles.rotation.y += 0.0005;
      particles.rotation.x += 0.0002;
      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      const w = wrap.clientWidth;
      const h = wrap.clientHeight;
      renderer.setSize(w, h);
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
    });

    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>

